@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700&family=Noto+Sans+SC:wght@400;500;700&display=swap');

:root {
    --color-background: #F5F5F5;
    --color-text: #1A1A1A;
    --color-accent: #FF0000;
    --color-muted: #888888;
    --color-border: #EAEAEA;
    --color-card-bg: #FFFFFF;
    --color-header-bg: rgba(245, 245, 245, 0.8);

    --font-sans: 'Noto Sans SC', sans-serif;
    --font-serif: 'Noto Serif SC', serif;
    --transition-fast: all 0.2s ease;
    --transition-medium: all 0.3s ease;
}

html.theme-dark {
    --color-background: #121212;
    --color-text: #E0E0E0;
    --color-accent: #FF4D4D;
    --color-muted: #9E9E9E;
    --color-border: #2E2E2E;
    --color-card-bg: #1E1E1E;
    --color-header-bg: rgba(18, 18, 18, 0.8);
}

html {
    scroll-behavior: smooth;
}

body {
    background-color: var(--color-background);
    font-family: var(--font-sans);
    color: var(--color-text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    padding-top: 80px;
    transition: var(--transition-medium);
}

.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* --- Header & Nav --- */
.main-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: var(--color-header-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--color-border);
    z-index: 1000;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

.main-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 80px;
}

.logo {
    font-family: var(--font-serif);
    font-weight: 700;
    font-size: 1.5rem;
    text-decoration: none;
    color: var(--color-text);
    transition: color var(--transition-medium);
}

.nav-links {
    display: none; /* Hidden by default, shown on desktop */
    gap: 1.5rem;
}

.nav-link {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.nav-link:hover {
    color: var(--color-accent);
}

.nav-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-icon {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-text);
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-icon .icon-moon { display: none; }
.btn-icon .icon-sun { display: block; }
.btn-icon.is-dark .icon-moon { display: block; }
.btn-icon.is-dark .icon-sun { display: none; }

#menu-toggle-btn {
    display: block; /* Shown by default on mobile */
}

/* --- Sections & General Layout --- */
.showcase-section {
    background-color: var(--color-card-bg);
    border: 1px solid var(--color-border);
    padding: 2rem;
    margin-bottom: 4rem;
    border-radius: 8px;
    transition: var(--transition-medium);
}

.section-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

.title-pane { grid-area: title; }
.form-pane { grid-area: form; }
.results-pane { grid-area: results; }
.action-pane { grid-area: action; }

.section-title {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    font-weight: 700;
    line-height: 1.2;
}

.section-subtitle {
    font-size: 1rem;
    color: var(--color-muted);
    margin-top: 1rem;
    max-width: 40ch;
}

/* --- Form Elements --- */
.form-row {
    margin-bottom: 1rem;
}
.form-group {
    margin-bottom: 1rem;
}
.form-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-muted);
    margin-bottom: 0.5rem;
    display: block;
}
.form-control {
    width: 100%;
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border-radius: 4px;
    transition: var(--transition-fast);
    color: var(--color-text);
}
.form-control:focus {
    outline: none;
    border-color: var(--color-accent);
    background-color: var(--color-card-bg);
}
.time-input-group {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 0.5rem;
}

.btn {
    display: inline-block;
    width: 100%;
    text-align: center;
    padding: 1rem;
    font-size: 1rem;
    font-weight: 500;
    border: 1px solid;
    transition: var(--transition-fast);
    cursor: pointer;
    margin-top: 1rem;
    border-radius: 4px;
}
.btn-primary {
    background-color: var(--color-accent);
    border-color: var(--color-accent);
    color: white;
}
.btn-primary:hover {
    opacity: 0.85;
}
.btn-outline {
    background-color: transparent;
    border-color: var(--color-border);
    color: var(--color-muted);
}
.btn-outline:hover {
    border-color: var(--color-text);
    color: var(--color-text);
}
.btn-small {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    margin-top: 0;
}

/* Advanced Options */
.advanced-options-wrapper {
    margin-top: 1rem;
    margin-bottom: 1rem;
}
#advanced-options-toggle {
    width: auto;
    margin-bottom: 1rem;
}
.advanced-options-content {
    display: none; /* Collapsed by default */
    padding-top: 1rem;
    border-top: 1px solid var(--color-border);
}
.advanced-options-content.is-open {
    display: block;
}


/* --- Results & Metrics --- */
.metrics-list .metric-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 2rem;
}
.metric-number {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-accent);
    margin-right: 1rem;
}
.metric-name {
    font-size: 0.875rem;
    color: var(--color-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
}
.metric-value {
    font-family: var(--font-sans);
    font-size: 2rem;
    font-weight: 700;
    line-height: 1;
}

/* --- Tooltips --- */
[data-tooltip] {
    position: relative;
    cursor: help;
    border-bottom: 1px dotted var(--color-muted);
}
[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--color-text);
    color: var(--color-card-bg);
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: 0.875rem;
    font-weight: 400;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-fast);
    z-index: 10;
}
[data-tooltip]:hover::after {
    opacity: 1;
    visibility: visible;
}

/* --- Mobile Specific Adjustments --- */
@media (max-width: 991px) {
    .section-title {
        font-size: 2rem; /* Smaller title for mobile */
    }

    .section-subtitle {
        font-size: 1.1rem; /* Larger subtitle for mobile */
        margin-top: 0.5rem;
    }

    .metrics-table-compact {
        overflow-x: auto;
    }

    .metrics-table-compact table {
        min-width: 300px; /* Ensure table has a minimum width to enable scrolling */
    }
}

.metrics-list-mobile { display: block; }
.metrics-table-desktop { display: none; }

.metrics-table-compact table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}

.metrics-table-compact th, .metrics-table-compact td {
    border: 1px solid var(--color-border);
    padding: 0.75rem;
    text-align: left;
    font-size: 0.875rem;
}

.metrics-table-compact th {
    background-color: var(--color-background);
    font-weight: 500;
    color: var(--color-muted);
}

.metrics-table-compact td {
    font-weight: 700;
    color: var(--color-text);
}

/* --- Desktop & Larger Screens --- */
@media (min-width: 992px) {
    .metrics-list-mobile { display: none; }
    .metrics-table-desktop { display: block; }

    .container {
        padding: 0 2rem;
    }

    .main-nav {
        height: 80px;
    }

    .nav-links {
        display: flex; /* Show nav links */
        gap: 2rem;
    }

    #menu-toggle-btn {
        display: none; /* Hide hamburger menu */
    }

    .showcase-section {
        padding: 4rem;
        margin-bottom: 8rem;
    }

    .section-grid {
        grid-template-columns: 1.2fr 1fr 0.8fr; /* New 3-column layout */
        grid-template-areas:
            "title form results"
            "title form action"; /* Adjusted grid areas */
        gap: 2rem 4rem;
        align-items: start;
    }
    
    .alt-layout .section-grid {
        grid-template-areas: "title form results" !important; /* Simplified for alt-layout */
    }

    .results-pane {
        border-left: 1px solid var(--color-border);
        padding-left: 4rem;
        margin-top: 0;
    }

    .section-title {
        font-size: 3.5rem;
    }

    .section-subtitle {
        margin-top: 1.5rem;
    }

    .form-row.two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1rem;
    }
    .form-row.two-col .form-group {
        margin-bottom: 0;
    }

    .btn {
        width: auto;
    }
    #calculate-btn {
        width: 100%;
    }

    .advanced-options-wrapper {
        margin: 0;
    }
    #advanced-options-toggle {
        display: none; /* Hide toggle button on desktop */
    }
    .advanced-options-content {
        display: block; /* Always show advanced content on desktop */
        padding-top: 0;
        border-top: none;
    }

    .metric-value {
        font-size: 2.5rem;
    }
}

/* View Toggle Buttons */
.view-toggle-btn {
    display: inline-flex; /* Ensure they are visible */
    border: 1px solid var(--color-border);
    border-radius: 4px;
    padding: 0.25rem;
    color: var(--color-muted);
    transition: var(--transition-fast);
}

.view-toggle-btn:hover {
    color: var(--color-text);
    border-color: var(--color-text);
}

.view-toggle-btn.active {
    background-color: var(--color-accent);
    border-color: var(--color-accent);
    color: white;
}

/* Forced Layout Overrides */
:root.force-desktop .nav-links {
    display: flex !important;
}
:root.force-desktop #menu-toggle-btn {
    display: none !important;
}
:root.force-desktop .section-grid {
    grid-template-columns: 1.2fr 1fr 0.8fr !important; /* User specified grid */
    grid-template-areas:
        "title form results"
        "title form action" !important; /* Adjust grid areas for 3-column */
    gap: 2rem 4rem !important;
    align-items: start !important;
}
:root.force-desktop .alt-layout .section-grid {
    grid-template-areas: "title form results" !important; /* Simplified for alt-layout */
}
:root.force-desktop .results-pane {
    border-left: 1px solid var(--color-border) !important;
    padding-left: 4rem !important;
    margin-top: 0 !important;
}
:root.force-desktop .section-title {
    font-size: 3.5rem !important;
}
:root.force-desktop .section-subtitle {
    margin-top: 1.5rem !important;
}
:root.force-desktop .form-row.two-col {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 1rem !important;
    margin-bottom: 1rem !important;
}
:root.force-desktop .form-row.two-col .form-group {
    margin-bottom: 0 !important;
}
:root.force-desktop .btn {
    width: auto !important;
}
:root.force-desktop #calculate-btn {
    width: 100% !important;
}
:root.force-desktop .advanced-options-wrapper {
    margin: 0 !important;
}
:root.force-desktop #advanced-options-toggle {
    display: none !important;
}
:root.force-desktop .advanced-options-content {
    display: block !important;
    padding-top: 0 !important;
    border-top: none !important;
}
:root.force-desktop .metric-value {
    font-size: 2.5rem !important;
}

/* Force Mobile Layout */
:root.force-mobile .nav-links {
    display: none !important;
}
:root.force-mobile #menu-toggle-btn {
    display: block !important;
}
:root.force-mobile .section-grid {
    grid-template-columns: 1fr !important; /* User specified grid */
    grid-template-areas: none !important; /* Reset grid areas */
    gap: 2rem !important;
}
:root.force-mobile .alt-layout .section-grid {
    grid-template-areas: none !important;
}
:root.force-mobile .results-pane {
    border-left: none !important;
    padding-left: 0 !important;
    margin-top: 2rem !important;
}
:root.force-mobile .section-title {
    font-size: 2rem !important; /* Smaller title for mobile */
}
:root.force-mobile .section-subtitle {
    font-size: 1.1rem !important; /* Larger subtitle for mobile */
    margin-top: 0.5rem !important;
}
:root.force-mobile .form-row.two-col {
    display: block !important; /* Stack vertically */
}
:root.force-mobile .form-row.two-col .form-group {
    margin-bottom: 1rem !important;
}
:root.force-mobile .btn {
    width: 100% !important;
}
:root.force-mobile #calculate-btn {
    width: 100% !important;
}
:root.force-mobile .advanced-options-content {
    display: none !important; /* Ensure collapsed on mobile */
}
:root.force-mobile #advanced-options-toggle {
    display: block !important;
}
:root.force-mobile .metric-value {
    font-size: 2rem !important; /* Retain existing large numbers on mobile */
}